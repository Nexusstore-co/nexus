<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXUS | Modern Lifestyle Collective</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://js.paystack.co/v1/inline.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #fcfcfc; --text: #000; --border: #e5e7eb; --glass: rgba(255, 255, 255, 0.9); --accent: #2563eb; }
        .dark-mode { --bg: #0a0a0a; --text: #fff; --border: #262626; --glass: rgba(10, 10, 10, 0.9); --accent: #3b82f6; }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg); color: var(--text); scroll-behavior: smooth; transition: background-color 0.4s ease; }
        .page { display: none; }
        .active-page { display: block; animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
     
        .glass { background: var(--glass); backdrop-filter: blur(12px); border-bottom: 1px solid var(--border); }
        .product-card { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); border: 1px solid var(--border); position: relative; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.08); background: var(--bg); }
        .product-card:hover { transform: translateY(-8px); box-shadow: 0 12px 30px rgba(0,0,0,0.12); }
     
        .search-input { transition: width 0.4s ease, border-color 0.3s; width: 140px; background: transparent; color: var(--text); border-bottom: 1px solid var(--border); }
        .search-input:focus { width: 220px; border-color: var(--accent); }
     
        .cat-btn.active { border-bottom: 2px solid var(--text); color: var(--text); font-weight: 600; }
     
        /* Modal & Popup Styles */
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.7); display: none; justify-content: center; align-items: center; z-index: 1000; backdrop-filter: blur(4px); }
        .modal-content { background: var(--bg); color: var(--text); padding: 3.5rem; max-width: 520px; width: 92%; text-align: center; position: relative; border-radius: 16px; box-shadow: 0 20px 40px rgba(0,0,0,0.3); }
        
        .btn-nexus { border: 1px solid var(--text); padding: 0.6rem 1.2rem; font-size: 10px; letter-spacing: 0.25em; transition: all 0.3s ease; text-transform: uppercase; font-weight: 600; border-radius: 4px; }
        .btn-nexus:hover { background: var(--text); color: var(--bg); }
        .btn-remove { font-size: 9px; color: #ef4444; text-transform: uppercase; letter-spacing: 0.1em; margin-top: 8px; }
        
        .wish-btn { position: absolute; top: 1.2rem; right: 1.2rem; z-index: 10; transition: transform 0.2s ease; }
        .wish-btn.active svg { fill: #ef4444; stroke: #ef4444; }
        .specs-list { font-size: 0.875rem; line-height: 1.5; color: #666; }
        .dark .specs-list { color: #aaa; }
        .tech-animation-container { position: relative; display: flex; justify-content: center; align-items: center; width: 100%; max-width: 800px; margin-bottom: 2.5rem; }
        #tech-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0.3; z-index: -1; pointer-events: none; }
    </style>
</head>
<body id="body-tag" class="antialiased">

    <div id="newsletter-modal" class="modal-overlay">
        <div class="modal-content">
            <button onclick="closeNewsletter()" class="absolute top-4 right-6 text-2xl font-light">&times;</button>
            <h2 class="text-3xl font-light mb-4 tracking-widest">JOIN THE NEXUS</h2>
            <p class="text-gray-500 text-sm mb-8 font-light">Subscribe for exclusive access to new drops and tech innovations.</p>
            <form onsubmit="handleNewsletterSubmit(event)" class="space-y-4">
                <input type="email" id="news-email" placeholder="YOUR EMAIL" class="w-full bg-transparent border-b border-gray-300 p-3 outline-none focus:border-[var(--accent)] text-center" required>
                <button type="submit" class="w-full btn-nexus py-4">Subscribe</button>
            </form>
            <button onclick="closeNewsletter(true)" class="mt-6 text-[9px] uppercase tracking-widest opacity-40 hover:opacity-100 transition">Don't show again</button>
        </div>
    </div>

    <nav class="sticky top-0 z-50 glass p-4 shadow-sm">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="flex items-center gap-6">
                <h1 class="text-2xl font-light tracking-[0.4em] cursor-pointer" onclick="showPage('home')">NEXUS</h1>
                <div class="hidden xl:flex space-x-4 text-[10px] uppercase tracking-widest text-gray-500 dark:text-gray-400">
                    <button class="cat-btn active hover:text-[var(--text)] transition" onclick="filterByCategory('All', this)">All</button>
                    <button class="cat-btn hover:text-[var(--text)] transition" onclick="filterByCategory('Top Sellers', this)">Top Sellers</button>
                    <button class="cat-btn hover:text-[var(--text)] transition" onclick="filterByCategory('Tech', this)">Tech</button>
                    <button class="cat-btn hover:text-[var(--text)] transition" onclick="filterByCategory('Accessories', this)">Accessories</button>
                </div>
            </div>
         
            <div class="flex items-center gap-6">
                <input type="text" id="search-bar" onkeyup="handleSearch()" placeholder="SEARCH..." class="search-input px-2 py-1 text-xs outline-none">
                <button onclick="toggleDarkMode()" class="p-2 border border-gray-400/30 rounded-full">
                    <svg id="moon-icon" class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
                </button>
                <div class="space-x-4 text-[10px] uppercase tracking-widest flex items-center">
                    <button onclick="showPage('wishlist')" class="hover:opacity-70 transition">Wish (<span id="wish-count">0</span>)</button>
                    <button onclick="showPage('cart')" class="hover:opacity-70 transition">Bag (<span id="cart-count">0</span>)</button>
                </div>
            </div>
        </div>
    </nav>

    <main id="home" class="page active-page">
        <section class="min-h-[70vh] flex flex-col justify-center items-center text-center px-6">
            <div class="tech-animation-container">
                <canvas id="tech-canvas"></canvas>
                <h2 class="text-6xl md:text-8xl font-extralight mb-10 tracking-tight uppercase">Elevated Living.</h2>
            </div>
            <p class="text-gray-600 dark:text-gray-400 mb-10 max-w-xl leading-relaxed font-light text-lg italic">Engineered for Excellence at Nexus</p>
            <div class="flex gap-6">
                <button onclick="showPage('products')" class="border border-current px-10 py-4 hover:bg-[var(--text)] hover:text-[var(--bg)] transition uppercase text-[10px] tracking-[0.4em] font-semibold">Shop Collection</button>
            </div>
        </section>
        <section id="about" class="py-24 border-t border-gray-800/20 bg-gray-50/30 dark:bg-gray-900/10">
            <div class="max-w-5xl mx-auto px-6 text-center">
                <h2 class="text-4xl font-light mb-8 uppercase tracking-tighter">The Nexus Vision</h2>
                <p class="text-gray-600 dark:text-gray-400 leading-relaxed max-w-3xl mx-auto font-light">Nexus is more than a store; itâ€™s a curation of tools that simplify and beautify. We prioritize sustainability through refillable systems and encourage creativity through curated art supplies.</p>
            </div>
        </section>
        <section id="our-story" class="py-24 border-t border-gray-800/20 bg-gray-50/30 dark:bg-gray-900/10">
            <div class="max-w-5xl mx-auto px-6 text-center">
                <h2 class="text-4xl font-light mb-8 uppercase tracking-tighter">Our Story</h2>
                <p class="text-gray-600 dark:text-gray-400 leading-relaxed max-w-3xl mx-auto font-light">At Nexus, we believe connection is everything. Founded in 2023, our mission is to bridge the gap between innovation and everyday life, creating products and experiences that make a real difference.</p>
            </div>
        </section>
    </main>

    <main id="products" class="page max-w-7xl mx-auto py-20 px-6">
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8" id="product-grid"></div>
    </main>

    <main id="cart" class="page max-w-4xl mx-auto py-24 px-6">
        <div class="flex justify-between items-end mb-10">
            <h2 class="text-3xl font-light tracking-widest uppercase">Your Bag</h2>
            <button onclick="clearCart()" class="text-[9px] uppercase tracking-widest opacity-50 hover:opacity-100">Clear All</button>
        </div>
        <div id="cart-items" class="space-y-6"></div>
        <div id="cart-summary" class="mt-10 pt-10 border-t"></div>
        <div id="checkout-section" class="mt-10 hidden">
            <h3 class="text-2xl font-light mb-4">Checkout</h3>
            <form id="checkout-form" onsubmit="handleCheckout(event)">
                <input type="text" id="delivery-name" placeholder="Full Name" class="bg-transparent border-b border-gray-300 p-4 w-full mb-4" required>
                <input type="email" id="payment-email" placeholder="Email for Payment" class="bg-transparent border-b border-gray-300 p-4 w-full mb-4" required>
                <button type="submit" class="btn-nexus py-4 w-full">Proceed to Payment</button>
            </form>
        </div>
    </main>

    <script>
        // State Management
        let cart = JSON.parse(localStorage.getItem('nexus-cart')) || [];
        let wishlist = JSON.parse(localStorage.getItem('nexus-wishlist')) || [];

        const products = [
            { id: 1, name: 'Portable Car Hookah', price: 1360, category: 'Automotive', sales: 2100, image: 'https://www.ashishaonline.co.za/cdn/shop/products/109478526_3324191984298017_5697333573222117201_o_portable_shisha_2048x.jpg?v=1658918521', desc: 'Travel hookah designed for standard cup holders.', reviews: [] },
            { id: 2, name: 'Auto Soap Dispenser', price: 720, category: 'Home', sales: 850, image: 'https://thefoschini.vtexassets.com/arquivos/ids/213899792-1200-1600?v=638901801086030000', desc: 'Touchless IR sensor dispenser.', reviews: [] },
            { id: 15, name: 'Self-Cleaning Bottle', price: 1520, category: 'Tech', sales: 310, image: 'https://www.cnet.com/a/img/resize/1077e112091a42644995a1945ec162c2d2fae98f/hub/2025/06/04/7bdb809e-6286-4d9b-bcd9-08077ce4dbb2/larq-self-cleaning-water-bottle.jpg?auto=webp&width=1200', desc: 'Built-in UV-C light for water purification.', reviews: [] }
            // ... (rest of your products)
        ];

        // Newsletter Logic
        window.onload = () => {
            if (!localStorage.getItem('nexus-newsletter-hidden')) {
                setTimeout(() => {
                    document.getElementById('newsletter-modal').style.display = 'flex';
                }, 2000);
            }
            renderProducts();
            updateCounts();
        };

        function closeNewsletter(permanent = false) {
            document.getElementById('newsletter-modal').style.display = 'none';
            if (permanent) localStorage.setItem('nexus-newsletter-hidden', 'true');
        }

        function handleNewsletterSubmit(e) {
            e.preventDefault();
            alert('Welcome to the Collective. Your discount code has been sent.');
            closeNewsletter(true);
        }

        // Navigation
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
            document.getElementById(pageId).classList.add('active-page');
            if(pageId === 'cart') renderCart();
            window.scrollTo(0, 0);
        }

        // Cart Actions
        function addToCart(id) {
            const product = products.find(p => p.id === id);
            cart.push(product);
            saveAndRefresh();
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            saveAndRefresh();
            renderCart();
        }

        function clearCart() {
            if(confirm('Empty your bag?')) {
                cart = [];
                saveAndRefresh();
                renderCart();
            }
        }

        function saveAndRefresh() {
            localStorage.setItem('nexus-cart', JSON.stringify(cart));
            updateCounts();
        }

        function updateCounts() {
            document.getElementById('cart-count').innerText = cart.length;
            document.getElementById('wish-count').innerText = wishlist.length;
        }

        function renderCart() {
            const container = document.getElementById('cart-items');
            const summary = document.getElementById('cart-summary');
            const checkout = document.getElementById('checkout-section');
            
            if (cart.length === 0) {
                container.innerHTML = `<p class="text-center py-10 opacity-50 uppercase tracking-widest">Your bag is empty</p>`;
                summary.innerHTML = "";
                checkout.classList.add('hidden');
                return;
            }

            checkout.classList.remove('hidden');
            container.innerHTML = cart.map((item, index) => `
                <div class="flex items-center justify-between border-b border-gray-100 pb-6">
                    <div class="flex items-center gap-6">
                        <img src="${item.image}" class="w-20 h-24 object-cover rounded">
                        <div>
                            <h4 class="font-medium">${item.name}</h4>
                            <p class="text-xs opacity-50">R ${item.price}</p>
                            <button onclick="removeFromCart(${index})" class="btn-remove">Remove</button>
                        </div>
                    </div>
                    <p class="font-light">R ${item.price}</p>
                </div>
            `).join('');

            const total = cart.reduce((sum, item) => sum + item.price, 0);
            summary.innerHTML = `
                <div class="flex justify-between text-xl font-light tracking-widest uppercase">
                    <span>Total</span>
                    <span>R ${total}</span>
                </div>
            `;
        }

        // Theme Toggle
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            document.getElementById('moon-icon').style.color = isDark ? '#3b82f6' : 'currentColor';
        }

        // Render Products (Initial)
        function renderProducts(data = products) {
            const grid = document.getElementById('product-grid');
            grid.innerHTML = data.map(p => `
                <div class="product-card p-4 cursor-pointer" onclick="showProductDetails(${p.id})">
                    <img src="${p.image}" class="w-full h-64 object-cover mb-4 rounded">
                    <h3 class="text-xs tracking-widest uppercase mb-1">${p.name}</h3>
                    <p class="text-sm font-semibold italic">R ${p.price}</p>
                </div>
            `).join('');
        }

        // Handle Search and Filter (Placeholders for your existing logic)
        function filterByCategory(cat, btn) {
            document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            const filtered = cat === 'All' ? products : products.filter(p => p.category === cat);
            renderProducts(filtered);
            showPage('products');
        }
    </script>
</body>
</html>
